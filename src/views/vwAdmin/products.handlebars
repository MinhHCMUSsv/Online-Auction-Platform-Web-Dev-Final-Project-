{{#section 'css'}}
<style>
	:root {
		--accent: #ff8c00;
		--accent-dark: #d66f00;
	}

	.product-kpi {
		border: 1px solid #f1f1f1;
		border-radius: 12px;
		padding: 1rem 1.25rem;
		background: linear-gradient(135deg, rgba(255, 140, 0, 0.08), #ffffff);
	}

	.table thead th {
		border-bottom: 2px solid #f1f1f1;
		text-transform: uppercase;
		font-size: 0.84rem;
		letter-spacing: 0.02em;
	}

	.badge-soft {
		background: rgba(33, 37, 41, 0.08);
		color: #212529;
		border: 1px solid rgba(33, 37, 41, 0.12);
	}

	.badge-live {
		background: rgba(31, 154, 84, 0.12);
		color: #1f9a54;
		border: 1px solid rgba(31, 154, 84, 0.18);
	}

	.badge-draft {
		background: rgba(255, 140, 0, 0.12);
		color: #b35f00;
		border: 1px solid rgba(255, 140, 0, 0.22);
	}
</style>
{{/section}}

<div class="d-flex flex-wrap align-items-center justify-content-between gap-3 mb-4">
	<div>
		<p class="text-muted mb-1">Admin / Products</p>
		<h1 class="h3 fw-bold mb-0">Product Dashboard</h1>
		<div class="text-muted small">Monitor listings, bids, and seller status.</div>
	</div>
	<div class="d-flex flex-wrap gap-2">
		<button class="btn btn-outline-dark">Export</button>
		<a class="btn btn-warning text-dark fw-semibold" href="/admin/products/add">
			<i class="bi bi-plus-lg me-1"></i>New Product
		</a>
	</div>
</div>

<div class="row g-3 mb-4">
	<div class="col-md-4">
		<div class="product-kpi">
			<div class="text-muted small">Live auctions</div>
			<div class="h4 fw-bold mb-0">{{liveCount}}<span class="text-muted small ms-1">items</span></div>
		</div>
	</div>
	<div class="col-md-4">
		<div class="product-kpi">
			<div class="text-muted small">Drafts</div>
			<div class="h4 fw-bold mb-0">{{draftCount}}</div>
		</div>
	</div>
	<div class="col-md-4">
		<div class="product-kpi">
			<div class="text-muted small">Flagged</div>
			<div class="h4 fw-bold mb-0">{{flagCount}}</div>
		</div>
	</div>
</div>

<div class="card border-0 shadow-sm">
	<div class="card-body p-0">
		<div class="d-flex align-items-center justify-content-between px-3 py-3 border-bottom">
			<div class="d-flex gap-2 flex-wrap">
				<span class="badge badge-soft">All</span>
				<span class="badge badge-live">Live</span>
				<span class="badge badge-draft">Draft</span>
			</div>
			<form class="d-flex" action="" method="get">
				<input type="search" class="form-control" name="q" placeholder="Search product...">
			</form>
		</div>

		<div class="table-responsive">
			<table class="table table-hover align-middle mb-0">
				<thead class="table-light">
					<tr>
						<th style="width: 80px;">ID</th>
						<th>Name</th>
						<th style="width: 180px;">Category</th>
						<th style="width: 150px;">Current Bid</th>
						<th style="width: 140px;">Status</th>
						<th style="width: 160px;" class="text-end">Action</th>
					</tr>
				</thead>
				<tbody>
					{{#if products}}
						{{#each products}}
							<tr>
								<td class="fw-semibold text-muted">{{#if product_id}}{{product_id}}{{else}}#{{@index}}{{/if}}</td>
								<td>
									<div class="fw-semibold">{{name}}</div>
									<div class="text-muted small">Seller: {{#if seller}}{{seller}}{{else}}N/A{{/if}}</div>
								</td>
								<td>
									<span class="badge text-bg-light border">{{#if category}}{{category}}{{else}}Uncategorized{{/if}}</span>
								</td>
								<td class="fw-semibold">{{#if price}}{{price}}{{else}}â€”{{/if}}</td>
								<td>
									{{#if (eq status 'live')}}
										<span class="badge badge-live">Live</span>
									{{else if (eq status 'draft')}}
										<span class="badge badge-draft">Draft</span>
									{{else}}
										<span class="badge badge-soft">{{#if status}}{{status}}{{else}}Pending{{/if}}</span>
									{{/if}}
								</td>
								<td>
									<div class="d-flex justify-content-end gap-2">
										<a class="btn btn-sm btn-outline-secondary" href="/admin/products/details?product_id={{product_id}}">
											<i class="bi bi-eye me-1"></i>View
										</a>
										<a class="btn btn-sm btn-outline-dark" href="/admin/products/edit?product_id={{product_id}}">
											<i class="bi bi-pencil-square me-1"></i>Edit
										</a>
										<form class="mb-0" action="/admin/products/disable" method="post">
											<input type="hidden" name="product_id" value="{{product_id}}">
											<button type="submit" class="btn btn-sm btn-outline-danger">
												<i class="bi bi-slash-circle me-1"></i>Disable
											</button>
										</form>
									</div>
								</td>
							</tr>
						{{/each}}
					{{else}}
						<tr>
							<td colspan="6" class="text-center p-5">
								<div class="fw-semibold mb-1">No products found</div>
								<div class="text-muted mb-3">When products are created, they will appear here for review.</div>
								<a class="btn btn-warning text-dark" href="/admin/products/add">Add product</a>
							</td>
						</tr>
					{{/if}}
				</tbody>
			</table>
		</div>
	</div>
</div>
