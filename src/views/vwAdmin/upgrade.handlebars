{{#section 'css'}}
<style>
	:root {
		--accent: #ff8c00;
		--accent-dark: #d66f00;
	}

	.upgrade-hero {
		background: linear-gradient(135deg, rgba(255, 140, 0, 0.1), rgba(255, 140, 0, 0));
		border: 1px solid #f4e6d6;
		border-radius: 14px;
		padding: 1rem 1.25rem;
	}

	.badge-new {
		background: rgba(25, 135, 84, 0.1);
		color: #198754;
		border: 1px solid rgba(25, 135, 84, 0.2);
	}

	.badge-waiting {
		background: rgba(255, 140, 0, 0.12);
		color: #b35f00;
		border: 1px solid rgba(255, 140, 0, 0.18);
	}
</style>
{{/section}}

<div class="d-flex align-items-start justify-content-between flex-wrap gap-3 mb-4">
	<div>
		<h1 class="h3 fw-bold mb-2">Upgrade Queue</h1>
		<div class="upgrade-hero">
			<div class="fw-semibold mb-1">Review bidder â†’ seller / admin upgrade requests</div>
			<div class="text-muted small">Keep decision history transparent with consistent MNGo colors.</div>
		</div>
	</div>
	<div class="d-flex gap-2 flex-wrap">
		<button class="btn btn-outline-dark">Export</button>
		<button class="btn btn-warning text-dark fw-semibold">Bulk approve</button>
	</div>
</div>

<div class="card shadow-sm border-0">
	<div class="card-body p-0">
		<div class="table-responsive">
			<table class="table table-hover align-middle mb-0">
				<thead class="table-light">
					<tr>
						<th style="width: 100px;">#</th>
						<th style="width: 500px;">User</th>
						<th style="width: 700px;">Email</th>
						<th style="width: 200px;">Point</th>
						<th style="width: 300px;"></th>
						<th style="width: 500px;">Status</th>
						
						<th style="width: 500px;" class="text-end">Action</th>
					</tr>
				</thead>
				<tbody>
					{{#if upgradeRequests}}
						{{#each upgradeRequests}}
						<tr>
							<td class="fw-semibold text-muted">{{#if request_id}}{{request_id}}{{else}}#{{@index}}{{/if}}</td>
							<td>
								<div class="fw-semibold">{{full_name}}</div>
								<div class="text-muted small">User ID: {{user_id}}</div>
							</td>
							<td class="text-muted">{{email}}</td>
							<td>
								<span class="badge text-bg-light border">{{points}}</span>
							</td>
							<td></td>
							<td>
								{{#if (eq status 'new')}}
									<span class="badge badge-new">New</span>
								{{else if (eq status 'pending')}}
									<span class="badge badge-waiting">Pending</span>
								{{else}}
									<span class="badge text-bg-light border">{{status}}</span>
								{{/if}}
							</td>
							<td>
								<div class="d-flex justify-content-end gap-2">
									<form class="mb-0" action="/admin/upgrade/approve" method="post">
										<input type="hidden" name="request_id" value="{{request_id}}">
										<button type="submit" class="btn btn-sm btn-outline-success">
											<i class="bi bi-check2 me-1"></i>Approve
										</button>
									</form>
									<form class="mb-0" action="/admin/upgrade/reject" method="post">
										<input type="hidden" name="request_id" value="{{request_id}}">
										<button type="submit" class="btn btn-sm btn-outline-danger">
											<i class="bi bi-x-lg me-1"></i>Reject
										</button>
									</form>
								</div>
							</td>
						</tr>
						{{/each}}
					{{else}}
						<tr>
							<td colspan="7" class="text-center p-5">
								<div class="fw-semibold mb-1">No upgrade requests</div>
								<div class="text-muted">When users request upgrades, they will appear here for approval.</div>
							</td>
						</tr>
					{{/if}}
				</tbody>
			</table>
		</div>
	</div>
</div>
